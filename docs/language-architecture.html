<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Burst</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,400i,700,700i,600,600i&amp;display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nunito+Sans&amp;display=swap">
    <link rel="stylesheet" href="assets/css/Articles-Cards-images.css">
    <link rel="stylesheet" href="assets/css/burst-hero-id.css">
    <link rel="stylesheet" href="assets/css/burst-hero.css">
    <link rel="stylesheet" href="assets/css/data-img-hero.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/baguettebox.js/1.10.0/baguetteBox.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Nunito+Sans:ital,wght@0,200;0,300;0,400;0,600;0,700;0,800;0,900;1,200;1,300;1,400;1,600;1,700;1,800;1,900&amp;display=swap">
    <link rel="stylesheet" href="assets/css/learn-more-button-orange.css">
    <link rel="stylesheet" href="assets/css/media-navbar-github-logo.css">
    <link rel="stylesheet" href="assets/css/media-navbar-github-mobile.css">
    <link rel="stylesheet" href="assets/css/styles-custom.css">
    <link rel="stylesheet" href="assets/css/vanilla-zoom.min.css">
</head>

<body style="font-family: 'Nunito Sans', sans-serif;background-color: #fff;">
    <nav class="navbar navbar-light navbar-expand-lg fixed-top bg-white clean-navbar" id="header-burst-why-burst">
        <div class="container"><a href="index.html"><img src="assets/img/tech/Burst-Horizontal-RevAccent.svg" style="width: 130px;padding-right: 0px;margin-right: 20px;margin-top: -7px;" /></a><button data-bs-toggle="collapse" class="navbar-toggler" data-bs-target="#navcol-1" style="color: transparent !important;border-width: 0px;border-color: #ffffff;border: 0 !important;"><span class="visually-hidden">Toggle navigation</span><span class="navbar-toggler-icon" style="border: 0 !important;border-style: none;border-color: rgba(255,255,255,0);--bs-body-bg: rgba(255,255,255,0);"></span></button>
            <div class="collapse navbar-collapse scroll-down" id="navcol-1">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item"><a class="nav-link text-capitalize" id="nav-a-padd" href="why-burst.html" style="color: #fff !important;font-family: 'Nunito Sans', sans-serif;font-weight: 600;font-size: 16px;opacity: 1;">why Burst</a></li>
                    <li class="nav-item active-menu-item"><a class="nav-link text-capitalize active" id="nav-a-padd" href="architecture.html" style="color: #fff;font-family: 'Nunito Sans', sans-serif;font-weight: 600;font-size: 16px;">Architecture</a></li>
                    <li class="nav-item hover-menu-item"><a class="nav-link text-capitalize" id="nav-a-padd" href="https://github.com/yahoo/burst/tree/burst-4.0" style="color: #fff;font-family: 'Nunito Sans', sans-serif;font-weight: 600;font-size: 16px;" target="_blank">Version 4.0</a></li>
                    <li class="nav-item hover-menu-item"><a class="nav-link text-capitalize" id="nav-a-padd" href="blog-welcome.html" style="color: #fff;font-family: 'Nunito Sans', sans-serif;font-weight: 600;font-size: 16px;">Blog</a></li>
                </ul>
            </div><a id="navbar-github-logo" class="navbar-github logo" href="https://github.com/yahoo/burst/tree/burst-4.0" target="_blank"><i class="fa-brands fa-github" style="color: white;"></i></a>
        </div>
    </nav>
    <main class="page landing-page" style="background-color: #fff;">
        <section class="clean-block clean-info dark">
            <div class="container">
                <div class="row">
                    <div class="col-md-12">
                        <p>Paragraph</p>
                    </div>
                    <div class="col-md-12">
                        <h1 class="first-heading"><strong><span style="color: rgb(36, 41, 47); background-color: var(--color-neutral-muted);">Burst Language Architecture</span></strong><br></h1>
                        <hr style="height: 3px;">
                        <p><span style="color: rgb(36, 41, 47);">The Burst language pipeline is a quite deep topic and this architectural overview can not appropriately dive very deep into details. Here are a few high level concepts to take away.</span></p>
                        <h2><strong><span style="color: rgb(36, 41, 47);">Multi stage pipeline</span></strong></h2>
                        <hr style="height: 3px;"><img src="assets/img/tech/burst_transpilation.svg" style="width:70%;max-width:100%;">
                        <p><span style="color: rgb(36, 41, 47);">Burst made a valuable early decision to separate the execution pipeline into multiple distinct language based processing steps.</span><br></p>
                        <h3><strong><span style="color: rgb(36, 41, 47);">EQL</span></strong><br></h3>
                        <p><span style="color: rgb(36, 41, 47);">The first step is occupied by a high-level&nbsp;</span><span style="color: rgb(36, 41, 47); background-color: var(--color-neutral-muted);">SQL</span><span style="color: rgb(36, 41, 47);">&nbsp;familiar language called&nbsp;</span><span style="color: rgb(36, 41, 47); background-color: var(--color-neutral-muted);">EQL</span><span style="color: rgb(36, 41, 47);">. The second step is a low level execution language called&nbsp;</span><span style="color: rgb(36, 41, 47); background-color: var(--color-neutral-muted);">HYDRA</span><span style="color: rgb(36, 41, 47);">. The&nbsp;</span><span style="color: rgb(36, 41, 47); background-color: var(--color-neutral-muted);">EQL</span><span style="color: rgb(36, 41, 47);">&nbsp;subsystem fields incoming external client analysis queries in the&nbsp;</span><span style="color: rgb(36, 41, 47); background-color: var(--color-neutral-muted);">EQL</span><span style="color: rgb(36, 41, 47);">&nbsp;language and generated corresponding&nbsp;</span><span style="color: rgb(36, 41, 47); background-color: var(--color-neutral-muted);">HYDRA</span><span style="color: rgb(36, 41, 47);">&nbsp;transcompilation as an output.</span><br></p>
                        <h5><strong><span style="color: rgb(87, 96, 106);">EQL example</span></strong><br></h5><code style="padding-top: 20px;padding-bottom: 20px;"><p style="text-align:left;">select count(user.sessions.events) as eventFrequency,<br />user.sessions.events.id as eventId<br />beside select count(user.sessions) as sessions,<br />user.sessions.originMethodTypeId as originMethodType<br />from schema Unity</p></code>
                        <h3><strong><span style="color: rgb(36, 41, 47);">Hydra</span></strong><br></h3>
                        <p><span style="color: rgb(36, 41, 47);">The&nbsp;</span><span style="color: rgb(36, 41, 47); background-color: var(--color-neutral-muted);">HYDRA</span><span style="color: rgb(36, 41, 47);">&nbsp;subsystem takes incoming&nbsp;</span><span style="color: rgb(36, 41, 47); background-color: var(--color-neutral-muted);">HYDRA</span><span style="color: rgb(36, 41, 47);">&nbsp;language requests and generates&nbsp;</span><span style="color: rgb(36, 41, 47); background-color: var(--color-neutral-muted);">SCALA</span><span style="color: rgb(36, 41, 47);">&nbsp;transcompilation as an output. Finally the&nbsp;</span><span style="color: rgb(36, 41, 47); background-color: var(--color-neutral-muted);">SCALA</span><span style="color: rgb(36, 41, 47);">&nbsp;is compiled down to bytecode and the bytecode is used to implement high performance&nbsp;</span><span style="color: rgb(36, 41, 47); background-color: var(--color-neutral-muted);">JIT</span><span style="color: rgb(36, 41, 47);">&nbsp;warmed scan closures that execute the intended semantics of the incoming&nbsp;</span><span style="color: rgb(36, 41, 47); background-color: var(--color-neutral-muted);">EQL</span><span style="color: rgb(36, 41, 47);">&nbsp;construction.</span><br></p>
                        <h5><strong><span style="color: rgb(87, 96, 106);">hydra snippet</span></strong><br></h5><code><p style="text-decoration:left;">hydra myAnalysis (<br /><br />  // parameters (default values can overridden during calls) <br />  param1:boolean = true,<br />  param2:integer = 1,<br />  param3:map[string, string] = map(&quot;hello&quot; -&gt; &quot;goodbye&quot; + param2, &quot;red&quot; → &quot;blue&quot;),<br />  param4:set[double] = set(1.0 / param2, 2.3 * 10),<br />  param5:string = null<br /><br />) {<br />  schema unity<br /><br />  val val1:long = 0<br />  var val2:boolean = null // nulls ok!<br /><br />  // first query in analysis<br />  frame myCube {<br /><br />   val val1:integer = 0<br /><br />   cube user {<br />    limit = 300<br />    aggregates {<br />      agg1:sum[integer]<br />      agg2:top[byte](30 + 1)<br />    }<br />    dimensions {<br />      dim1:verbatim[long]<br />    }</p></code>
                        <h3><strong><span style="color: rgb(36, 41, 47);">code generation</span></strong><br></h3>
                        <p><span style="color: rgb(36, 41, 47);">The ultimate goal of the language pipeline is to take a user-friendly SQL like analysis specification and to generate extremely fast bytecode that can execute a single pass scan on a large number of Brio Blob entities on all available cores/threads on a given Cell Worker.</span><br></p>
                        <h5><strong><span style="color: rgb(87, 96, 106);">generated code snippet</span></strong><br></h5><code><p style="text-align:left;">@inline final def apply(runtime:QuoTraveler_lexicon_runtime, sweep: org.burstsys.felt.model.sweep.FeltSweep): Unit = {<br /> val reader = runtime.reader;<br /> latticeVarInitialize(runtime);<br /> val rootPathKey = brioSchema.rootNode.pathKey;<br /> sweep.rootSplice(runtime, rootPathKey, 15); // TraverseCommencePlace<br /> { // BEGIN reference scalar tunnels for &#39;user&#39;<br />  runtime.lattice_user_channels_relation_isNull = true; // reset<br />  runtime.lattice_user_project_relation_isNull = true; // reset<br />  runtime.lattice_user_sessions_parameters_relation_isNull = true; // reset<br />  runtime.lattice_user_sessions_events_parameters_relation_isNull = true; // reset<br />  runtime.lattice_user_sessions_events_relation_isNull = true; // reset<br />  runtime.lattice_user_sessions_relation_isNull = true; // reset<br />  runtime.lattice_user_personas_relation_isNull = true; // reset<br />  runtime.lattice_user_segments_relation_isNull = true; // reset<br />  runtime.lattice_user_parameters_relation_isNull = true; // reset<br />  runtime.lattice_user_relation.versionKey(reader) match {<br />   case 1 => { // schema version 1<br />    tunnel_v1_user_project(runtime, sweep, reader);<br />   }</p></code>
                        <h3><strong><span style="color: rgb(36, 41, 47);">JIT warming</span></strong><br></h3>
                        <p><span style="color: rgb(36, 41, 47);">Because we are generating bytecode, we benefit from the extremely large number of executions of a given bytecode class, along with our use of off-heap memory intrinsics, to make the huge scale of simple memory access patterns involved almost as fast as machine code. This relies heavily on JIT compiler 'warming' characteristics.</span></p>
                        <h3><strong><span style="color: rgb(36, 41, 47);">caching</span></strong><br></h3>
                        <p><span style="color: rgb(36, 41, 47);">Because this process of taking&nbsp;</span><strong><span style="color: rgb(36, 41, 47);">EQL</span></strong><span style="color: rgb(36, 41, 47);">, generating&nbsp;</span><strong><span style="color: rgb(36, 41, 47);">Hydra</span></strong><span style="color: rgb(36, 41, 47);">, generating&nbsp;</span><strong><span style="color: rgb(36, 41, 47);">Scala</span></strong><span style="color: rgb(36, 41, 47);">, and generating&nbsp;</span><strong><span style="color: rgb(36, 41, 47);">bytecode</span></strong><span style="color: rgb(36, 41, 47);">&nbsp;is not for free, we cache the bytecode closures in order to make use of them again if we see the same analysis request. If one is executing completely ad-hoc analysis runs, then this caching does not add value, but if one is running the same query against different datasets, then this caching is highly valuable. The pipeline performance of a given analysis specification is quite fast even when first generated (and cached), but performance improves significantly.</span><br></p>
                        <h3><strong><span style="color: rgb(36, 41, 47);">parameterization</span></strong><br></h3>
                        <p><span style="color: rgb(36, 41, 47);">In order to broaden the number of queries that benefit from caching, EQL and Hydra introduce a feature called 'parameterization'. Any given query can have a set of named/typed parameters that are passed along with the EQL analysis specification and passed to Hydra. This means that a cached bytecode analysis can be re-used as long as only the parameter values have changed, not the structural semantics involved. This allows a broad range of 'report' style analytics where a number of queries can be run that differ only in moderate customizations.</span><br></p>
                        <h3><strong><span style="color: rgb(36, 41, 47);">analysis parallelism</span></strong><br></h3>
                        <p><span style="color: rgb(36, 41, 47);">Another signification optimization in the EQL/Hydra pipeline is that any given analysis specification can contain an unlimited number of parallel analytics. These are executed in parallel in the single pass scan operation thus lifting CPU pipelines and memory management performance. These multi-part analysis specifications, along with parameterization, allow the construction of highly useful complex 'reports' that are extremely high performance.</span><br></p>
                        <h2><strong><span style="color: rgb(36, 41, 47);">The pipeline runtime operations overview</span></strong><br></h2>
                        <hr style="height: 3px;"><img src="assets/img/tech/burst_pipeline.svg" style="width: 100%; max-width: 100%;">
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-md-12 col-lg-12"><p id="architectural-themes" style="font-size: 18px;padding-top: 40px;"><span style="color: rgb(36, 41, 47);">The sequence of operations as depicted above are:</span><br /><br /></p>
                        <ol style="font-size: 18px;">
                            <li><strong><span style="color: rgb(36, 41, 47);">SUPERVISOR:</span></strong><br>
                                <ul>
                                    <li><span style="color: rgb(36, 41, 47);">EQL source is received via the client library</span><br></li>
                                    <li><span style="color: rgb(36, 41, 47);">EQL&nbsp;</span><span style="color: rgb(36, 41, 47); background-color: var(--color-neutral-muted);">parses</span><span style="color: rgb(36, 41, 47);">&nbsp;the source and&nbsp;</span><span style="color: rgb(36, 41, 47); background-color: var(--color-neutral-muted);">validates</span><span style="color: rgb(36, 41, 47);">&nbsp;against the schema</span><br></li>
                                    <li><span style="color: rgb(36, 41, 47);">EQL&nbsp;</span><span style="color: rgb(36, 41, 47); background-color: var(--color-neutral-muted);">generates</span><span style="color: rgb(36, 41, 47);">&nbsp;HYDRA source</span><br></li>
                                    <li><span style="color: rgb(36, 41, 47);">HYDRA&nbsp;</span><span style="color: rgb(36, 41, 47); background-color: var(--color-neutral-muted);">parses</span><span style="color: rgb(36, 41, 47);">&nbsp;source and&nbsp;</span><span style="color: rgb(36, 41, 47); background-color: var(--color-neutral-muted);">validates</span><span style="color: rgb(36, 41, 47);">&nbsp;against the schema</span><br></li>
                                    <li><span style="color: rgb(36, 41, 47);">HYDRA&nbsp;</span><span style="color: rgb(36, 41, 47); background-color: var(--color-neutral-muted);">normalizes</span><span style="color: rgb(36, 41, 47);">&nbsp;the source</span><br></li>
                                </ul>
                            </li>
                            <li><strong><span style="color: rgb(36, 41, 47);">NETWORK:</span></strong><br>
                                <ul>
                                    <li><span style="color: rgb(36, 41, 47);">Hydra and Slice specs are serialized/scattered to worker-nodes</span><br></li>
                                </ul>
                            </li>
                            <li><strong><span style="color: rgb(36, 41, 47);">WORKER:</span></strong><br>
                                <ul>
                                    <li><span style="color: rgb(36, 41, 47);">Hydra checks sweep cache for generated artifacts</span><br></li>
                                    <li><span style="color: rgb(36, 41, 47);">Hydra&nbsp;</span><span style="color: rgb(36, 41, 47); background-color: var(--color-neutral-muted);">parses</span><span style="color: rgb(36, 41, 47);">&nbsp;the normalized source</span><br></li>
                                    <li><span style="color: rgb(36, 41, 47);">Hydra&nbsp;</span><span style="color: rgb(36, 41, 47); background-color: var(--color-neutral-muted);">generates</span><span style="color: rgb(36, 41, 47);">&nbsp;a Scala&nbsp;</span><span style="color: rgb(36, 41, 47); background-color: var(--color-neutral-muted);">Traveler</span><span style="color: rgb(36, 41, 47);">&nbsp;for the schema if needed</span><br></li>
                                    <li><span style="color: rgb(36, 41, 47);">Hydra&nbsp;</span><span style="color: rgb(36, 41, 47); background-color: var(--color-neutral-muted);">generates</span><span style="color: rgb(36, 41, 47);">&nbsp;a Scala&nbsp;</span><span style="color: rgb(36, 41, 47); background-color: var(--color-neutral-muted);">Sweep</span><span style="color: rgb(36, 41, 47);">&nbsp;that analysis if needed</span><br></li>
                                    <li><span style="color: rgb(36, 41, 47);">Scala compiler creates byte code for Traveler and Sweep if needed</span><br></li>
                                    <li><span style="color: rgb(36, 41, 47);">Slice is loaded or fetched through the slice cache if needed</span><br></li>
                                    <li><span style="color: rgb(36, 41, 47);">Traveler and Sweep are used to scan all the regions in the slice</span><br></li>
                                </ul>
                            </li>
                            <li><strong><span style="color: rgb(36, 41, 47);">NETWORK:</span></strong><br>
                                <ul>
                                    <li><span style="color: rgb(36, 41, 47);">all worker slice merge results are serialized and sent back to supervisor node</span><br></li>
                                </ul>
                            </li>
                            <li><strong><span style="color: rgb(36, 41, 47);">SUPERVISOR:</span></strong><br>
                                <ul>
                                    <li><span style="color: rgb(36, 41, 47);">slice results from all workers are merged together</span><br></li>
                                    <li><span style="color: rgb(36, 41, 47);">final result is sent back via the client library</span><br></li>
                                </ul>
                            </li>
                        </ol>
                    </div>
                </div>
            </div>
        </section>
    </main>
    <footer id="footer-burst" class="page-footer dark">
        <div class="container">
            <div class="row justify-content-center align-items-center">
                <div class="col-sm-3" style="text-align: center;"><img src="assets/img/tech/Burst-Vertical-RevAccent.svg" style="width: 100px;padding-bottom: 40px;"></div>
            </div>
            <div class="row justify-content-center align-items-center">
                <div class="col-sm-3 col-lg-2">
                    <h5 class="footer-h5-title">CONTACT<br></h5>
                    <ul>
                        <li></li>
                        <li><a href="https://github.com/yahoo/burst/issues" target="_blank">Issues<br></a></li>
                        <li><a href="mailto:info@burstsys.org">info@burstsys.org<br></a></li>
                        <li><a href="https://github.com/yahoo/burst/issues"><br></a></li>
                        <li></li>
                    </ul>
                </div>
                <div class="col-sm-3 col-lg-2">
                    <h5 class="footer-h5-title">COMMUNITY<br></h5>
                    <ul>
                        <li><a href="https://github.com/yahoo/burst/blob/main/Code_of_Conduct.md" target="_blank">Contributing<br></a></li>
                        <li><a href="#"><br></a></li>
                        <li><a href="#"><br></a></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="footer-copyright">
            <p id="current-year"></p>
        </div>
    </footer>
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/baguettebox.js/1.10.0/baguetteBox.min.js"></script>
    <script src="assets/js/vanilla-zoom.js"></script>
    <script src="assets/js/theme.js"></script>
    <script src="assets/js/active-menu-item.js"></script>
    <script src="assets/js/current-year.js"></script>
    <script src="assets/js/custom-js.js"></script>
    <script src="https://kit.fontawesome.com/4c85290a61.js"></script>
    <script src="assets/js/mobile-menu-fix.js"></script>
    <script src="assets/js/refresh_on_resize.js"></script>
</body>

</html>
